<html>
<head>
    <title>In Progress</title>
    <style>
        body {
            margin: 0;
        }

        canvas {
            width: 100%;
            height: 100%
        }
    </style>
</head>
<body>
    <script src="three.js"></script>
    <script src="GLTFLoader.js"></script>
    <script>
        var camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);
        var scene = new THREE.Scene();
        scene.background = new THREE.Color(0x000000);

        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        //Lights
        var light = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(light);

        //var light2 = new THREE.PointLight(0xffffff, 0.5);
        //scene.add(light2);

        // instantiate a loader
        var loader = new THREE.GLTFLoader().setPath('Face/');
        loader.load('face.gltf', handle_load);

        var mesh;
        function handle_load(gltf) {
            mesh = gltf.scene.children[0];
            //mesh.material = new THREE.MeshToonMaterial();
            scene.add(mesh);
            mesh.position.z = -5;
			mesh.position.x = 0;
        }
        // /window.alert(mesh.);
        camera.position.z = 0;

        //Get the mouse position
        var mouseX = 0, mouseY = 0;
        document.addEventListener('mousemove', onDocumentMouseMove, false);
		window.addEventListener('resize', onWindowResize, false);

        function onDocumentMouseMove(event) {
            
            event.preventDefault();
            mouseX = (event.clientX / window.innerWidth) * 2 - 1;
            mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
            //window.alert("mouse position: (" + mousex + ", "+ mousey + ")");
        }
		
		function onWindowResize() {
			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();
			renderer.setSize(window.innerWidth, window.innerHeight);
		}

        //Get the target rotation for the face
        var targetRotationX = mouseX * 0.5;
        var targetRotationY = mouseY * 0.5;

        //Rotate the face
        var animate = function () {
            requestAnimationFrame(animate);

            //mesh.rotation.z = 3.1415;
            mesh.rotation.y = 3.32;

            //Average the target position with the current rotation to make the rotation appear smoother
            mesh.rotation.z = (mesh.rotation.z + mouseX * 0.5) / 2;
            mesh.rotation.x = 1.5 + (mesh.rotation.x - 1.5 + mouseY * -0.5) / 2;
            renderer.render(scene, camera);
        };
        animate();
    </script>
</body>
</html>